#!/bin/bash
EXE=${ORIGINAL_SKALED:-~/skaled/build-debug-release/skaled/skaled}
#trap -- '' SIGINT SIGTERM SIGHUP EXIT
#until $EXE $@; do
#$EXE $@
while true; do
        export SKALED_TEST_LAST_GOOD_BLOCK_FOR_AMSTERDAM_FIX=$( cat SKALED_TEST_LAST_GOOD_BLOCK_FOR_AMSTERDAM_FIX.txt )
        $EXE $@
	#$EXE --download-snapshot dummy_param --public-key 18219295635707015937645445755505569836731605273220943516712644721479866137366:13229549502897098194754835600024217501928881864881229779950780865566962175067:3647833147657958185393020912446135601933571182900304549078758701875919023122:2426298721305518429857989502764051546820660937538732738470128444404528302050 $@
	echo "Restarting $EXE $@"
	sleep 1
done
